<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Shams Zia">

    <link href="distribution/fonts/fontawesome-webfont.eot" />
    <link href="distribution/fonts/fontawesome-webfont.svg" />
    <link href="distribution/fonts/fontawesome-webfont.ttf" />
    <link href="distribution/fonts/fontawesome-webfont.woff" />
    <link href="distribution/fonts/fontawesome-webfont.woff2" />
    <link href="distribution/fonts/glyphicons-halflings-regular.eot" />
    <link href="distribution/fonts/glyphicons-halflings-regular.svg" />
    <link href="distribution/fonts/glyphicons-halflings-regular.ttf" />
    <link href="distribution/fonts/glyphicons-halflings-regular.woff" />
    <link href="distribution/fonts/glyphicons-halflings-regular.woff2" />

    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="distribution/css/jquery-ui.min.css" />
    <link rel="stylesheet" href="distribution/css/jquery-ui.structure.min.css" />
    <link rel="stylesheet" href="distribution/css/jquery-ui.theme.min.css" />
    <link rel="stylesheet" href="distribution/css/bootstrap.min.css" />
    <link rel="stylesheet" href="distribution/css/font-awesome.min.css" />
    <link rel="stylesheet" href="distribution/css/styles.css" />

    <title></title>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4" role="navigation" data-bind="with: getFormObject()">
        <div class="navbar-brand">
            <a href="#">
                <img src="/Content/images/logo.png" class="img-fluid" alt="" data-bind="attr: { alt: Company }">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-nav" aria-controls="main-nav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>
    <div class="form-row p-0 m-0">
        <div class="col-lg-3 col-md-3 order-0" data-bind="with: getFormObject()">
            <ul class="list pl-5 pr-5">
                <li>
                    <a class="namespace" href="#" data-bind="click: function(data,event) { $parents[0].SelectConstructs('index.json'); }"><span>All Components</span></a>
                </li>
            </ul>
            <h6 class="pl-5 pr-5 d-flex align-content-start">Namespaces:</h6>
            <ul class="list pl-5 pr-5" data-bind="foreach: Namespaces">
                <li>
                    <a class="namespace" href="#" data-bind="click: function(data,event) { $parents[1].SelectConstructs('index.json', data.Namespace); }"><span data-bind="text: Namespace"></span></a>
                </li>
            </ul>
            <h6 class="pl-5 pr-5 d-flex align-content-start">Components:</h6>
            <ul class="list pl-5 pr-5" data-bind="foreach: Components">
                <li>
                    <a class="class" href="#" data-bind="click: function(data,event) { $parents[1].SelectConstruct(data.Url); }"><span data-bind="text: Name, attr: { title: Description }"></span></a>
                    <div data-bind="if: (Components !== null && Components !== undefined)">
                        <ul class="list pl-2 pr-2" data-bind="foreach: Components">
                            <li>
                                <a class="class" href="#" data-bind="click: function(data,event) { $parents[2].SelectConstruct(data.Url, data.Id); }"><span data-bind="text: Name, attr: { title: Description }"></span></a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 order-1">
            <h2 class="d-flex justify-content-lg-start"><a href="#" data-bind="attr: { href: getFormObject().Url }"><span data-bind="html: getFormObject().Title"></span></a></h2>
            <p data-bind="html: getFormObject().Description"></p>
            <div data-bind="with: getReferentialView('constructs-view').getObserverObject()">
                <div data-bind="with: getFormObject()">
                    <div class="form-group form-row">
                        <div class="col-12">
                            <div data-bind="if: (Constructs !== null && Constructs !== undefined)">
                                <h3 class="d-flex align-content-start" data-bind="if: (Constructs.Namespace !== null && Constructs.Namespace !== undefined)"><span data-bind="text: Constructs.Namespace.Name, attr: { title: Constructs.Namespace.Description }"></span></h3>
                            </div>
                            <h4 class="d-flex align-content-start" data-bind="text: Name, attr: { title: Description }"></h4>
                            <p class="mb-2 d-flex align-content-start">
                                <span data-bind="if: (Scope !== null && Scope !== undefined && Scope !== '')">
                                    <span class="pr-1" data-bind="text: Scope"></span>
                                </span>
                                <span data-bind="if: (Constraint !== null && Constraint !== undefined && Constraint !== '')">
                                    <span class="pr-1" data-bind="text: Constraint"></span>
                                </span>
                                <span data-bind="if: (Partial !== null && Partial !== undefined && Partial !== '')">
                                    <span class="pr-1" data-bind="text: Partial"></span>
                                </span>
                                <span data-bind="if: (Type !== null && Type !== undefined && Type !== '')">
                                    <span class="pr-1" data-bind="text: Type"></span>
                                </span>
                                <span data-bind="if: (Name !== null && Name !== undefined && Name !== '')">
                                    <span class="pr-1" data-bind="text: Name"></span>
                                </span>
                            </p>
                            <div class="mb-2" data-bind="if: (Constructs !== null && Constructs !== undefined)">
                                <div>Base class(es) and, or interface(s)</div>
                                <div data-bind="foreach: Constructs.Interfaces">
                                    <a href="#"><span data-bind="text: $data"></span></a>
                                </div>
                            </div>
                            <p class="d-flex align-content-start" data-bind="text: Description"></p>
                            <p class="d-flex align-content-start" data-bind="text: Comments"></p>
                        </div>
                    </div>
                    <div class="form-group form-row" data-bind="if: (Constructs !== null && Constructs !== undefined)">
                        <div class="col-12" data-bind="with: Constructs">
                            <div data-bind="if: Fields.length > 0">
                                <h5 class="d-flex align-content-start">Fields: </h5>
                                <ul class="list-attributes pl-0" data-bind="foreach: Fields">
                                    <li class="attribute">
                                        <a href="#"><span data-bind="text: Scope, attr: { class: ((Scope !== null && Scope !== undefined && Scope !== '') ? 'pr-1' : '') }"></span><span data-bind="text: Constraint, attr: { class: ((Constraint !== null && Constraint !== undefined && Constraint !== '') ? 'pr-1' : '') }"></span><span data-bind="text: Type, attr: { class: ((Type !== null && Type !== undefined && Type !== '') ? 'pr-1' : '') }"></span><span data-bind="text: Name, attr: { class: ((Name !== null && Name !== undefined && Name !== '') ? 'pr-1' : '') }"></span></a>
                                    </li>
                                    <li class="attribute description">
                                        <span data-bind="text: Description"></span>
                                    </li>
                                    <li class="attribute description">
                                        <span data-bind="text: Comments"></span>
                                    </li>
                                </ul>
                            </div>
                            <div data-bind="if: Properties.length > 0">
                                <h5 class="d-flex align-content-start">Properties: </h5>
                                <ul class="list-properties pl-0" data-bind="foreach: Properties">
                                    <li class="property">
                                        <a href="#"><span data-bind="text: Scope, attr: { class: ((Scope !== null && Scope !== undefined && Scope !== '') ? 'pr-1' : '') }"></span><span data-bind="text: Constraint, attr: { class: ((Constraint !== null && Constraint !== undefined && Constraint !== '') ? 'pr-1' : '') }"></span><span data-bind="text: Type, attr: { class: ((Type !== null && Type !== undefined && Type !== '') ? 'pr-1' : '') }"></span><span data-bind="text: Name, attr: { class: ((Name !== null && Name !== undefined && Name !== '') ? 'pr-1' : '') }"></span></a>
                                    </li>
                                    <li class="property description">
                                        <span data-bind="text: Description"></span>
                                    </li>
                                    <li class="attribute description">
                                        <span data-bind="text: Comments"></span>
                                    </li>
                                </ul>
                            </div>
                            <div data-bind="if: Constructors.length > 0">
                                <h5 class="d-flex align-content-start">Constructors: </h5>
                                <ul class="list-constructors pl-0" data-bind="foreach: Constructors">
                                    <li class="constructor">
                                        <a href="#">
                                            <span class="pr-1" data-bind="text: Scope"></span><span class="pr-1" data-bind="text: Name"></span>(<span data-bind="foreach: Arguments"><span class="pr-1" data-bind="text: Type"></span><span data-bind="text: Name"></span><span data-bind="text: ($index() === ($parents[0].Arguments.length - 1)) ? '': ', ' "></span></span>)
                                        </a>
                                    </li>
                                    <li class="constructor description">
                                        <span data-bind="text: Description"></span>
                                    </li>
                                    <li class="attribute description">
                                        <span data-bind="text: Comments"></span>
                                    </li>
                                </ul>
                            </div>
                            <div data-bind="if: StaticConstructors.length > 0">
                                <h5 class="d-flex align-content-start">Static Constructors: </h5>
                                <ul class="list-constructors pl-0" data-bind="foreach: StaticConstructors">
                                    <li class="constructor">
                                        <a href="#"><span class="pr-1" data-bind="text: Scope"></span><span class="pr-1" data-bind="text: Name"></span>(<span data-bind="foreach: Arguments"><span class="pr-1" data-bind="text: Type"></span><span data-bind="text: Name"></span></span>)</a>
                                    </li>
                                    <li class="constructor description">
                                        <span data-bind="text: Description"></span>
                                    </li>
                                    <li class="attribute description">
                                        <span data-bind="text: Comments"></span>
                                    </li>
                                </ul>
                            </div>
                            <div data-bind="if: Methods.length > 0">
                                <h5 class="d-flex align-content-start">Methods: </h5>
                                <ul class="list-functions pl-0" data-bind="foreach: Methods">
                                    <li class="function">
                                        <a href="#"><span class="pr-1" data-bind="text: Scope"></span><span class="pr-1" data-bind="text: (Constraint !== null && Constraint !== undefined) ? Constraint: '' "></span><span class="pr-1" data-bind="text: Type"></span><span class="pr-1" data-bind="text: Name"></span>(<span data-bind="foreach: Arguments"><span class="pr-1" data-bind="text: Type"></span><span data-bind="text: Name"></span><span data-bind="text: ($index() === ($parents[0].Arguments.length - 1)) ? '': ', ' "></span></span>)</a>
                                    </li>
                                    <li class="function description">
                                        <span data-bind="text: Description"></span>
                                    </li>
                                    <li class="attribute description">
                                        <span data-bind="text: Comments"></span>
                                    </li>
                                </ul>
                            </div>
                            <div data-bind="if: InstanceFunctions.length > 0">
                                <h5 class="d-flex align-content-start">Instance Functions: </h5>
                                <ul class="list-functions pl-0" data-bind="foreach: InstanceFunctions">
                                    <li class="function">
                                        <a href="#"><span class="pr-1" data-bind="text: Name"></span>(<span data-bind="foreach: Arguments"><span class="" data-bind="text: Name"></span><span data-bind="text: Value"></span><span data-bind="text: ($index() === ($parents[0].Arguments.length - 1)) ? '': ', ' "></span></span>)</a>
                                    </li>
                                    <li class="function description">
                                        <span data-bind="text: Description"></span>
                                    </li>
                                    <li class="attribute description">
                                        <span data-bind="text: Comments"></span>
                                    </li>
                                </ul>
                            </div>
                            <div data-bind="if: Indexers.length > 0 ">
                                <h5 class="d-flex align-content-start">Indexers: </h5>
                                <ul class="list-functions pl-0" data-bind="foreach: Indexers">
                                    <li class="function">
                                        <a href="#"><span class="pr-1" data-bind="text: Scope"></span><span class="pr-1" data-bind="text: (Constraint !== null && Constraint !== undefined) ? Constraint: '' "></span><span class="pr-1" data-bind="text: Type"></span><span class="pr-1" data-bind="text: Name"></span>[<span data-bind="foreach: Arguments"><span class="pr-1" data-bind="text: Type"></span><span data-bind="text: Name"></span><span data-bind="text: ($index() === ($parents[0].Arguments.length - 1)) ? '': ', ' "></span></span>]</a>
                                    </li>
                                    <li class="function description">
                                        <span data-bind="text: Description"></span>
                                    </li>
                                    <li class="attribute description">
                                        <span data-bind="text: Comments"></span>
                                    </li>
                                </ul>
                            </div>
                            <div data-bind="if: Events.length > 0">
                                <h5 class="d-flex align-content-start">Events: </h5>
                                <ul class="list-attributes pl-0" data-bind="foreach: Events">
                                    <li class="attribute">
                                        <a href="#"><span class="pr-1" data-bind="text: Scope"></span><span class="pr-1" data-bind="text: Constraint"></span><span class="pr-1" data-bind="text: Type"></span><span class="pr-1" data-bind="text: Name"></span></a>
                                    </li>
                                    <li class="attribute description">
                                        <span data-bind="text: Description"></span>
                                    </li>
                                    <li class="attribute description">
                                        <span data-bind="text: Comments"></span>
                                    </li>
                                </ul>
                            </div>
                            <div data-bind="if: ValueTypes.length > 0">
                                <h5 class="d-flex align-content-start">ValueTypes: </h5>
                                <ul class="list-attributes pl-0" data-bind="foreach: ValueTypes">
                                    <li class="attribute">
                                        <a href="#"><span class="pr-1" data-bind="text: (Type + ' = ' + Value)"></span></a>
                                    </li>
                                </ul>
                            </div>
                            <div data-bind="if: Additionals.length > 0">
                                <div class="pl-0" data-bind="foreach: Additionals">
                                    <div class="pb-1" data-bind="if: $data.Type === 'AdditionalNote'">
                                        <h6 class="d-flex align-content-start" data-bind="text: Title"></h6>
                                        <div data-bind="text: Description"></div>
                                    </div>
                                    <div class="pb-1" data-bind="if: $data.Type === 'AdditionalExample'">
                                        <h6 class="d-flex align-content-start" data-bind="text: Title"></h6>
                                        <div data-bind="text: Description"></div>
                                        <div><a href="#" data-bind="attr: { href: Url }"><span data-bind="text: Url"></span></a></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container copyright" data-bind="if: (getFormObject() !== null && getFormObject() !== undefined)">
        <div class="text-center p-3">
            <span data-bind="text: getFormObject().Copyright"></span>
        </div>
    </div>

    <!-- JAVASCRIPTS -->
    <script src="distribution/lib/jquery.js" type="text/javascript"></script>
    <script src="distribution/lib/jquery.form.js" type="text/javascript"></script>
    <script src="distribution/lib/jquery-ui-1.12.1.min.js" type="text/javascript"></script>
    <script src="distribution/lib/bootstrap.min.js" type="text/javascript"></script>
    <script src="distribution/lib/knockout-3.4.2.js" type="text/javascript"></script>
    <script src="distribution/lib/knockout.validation.min.js" type="text/javascript"></script>
    <script src="distribution/lib/windntrees.min.js" type="text/javascript"></script>

    <script src="distribution/js/Index.js"></script>
    <script src="distribution/js/Construct.js"></script>

    <script type="text/javascript">

        var ConstructView = new CRUDView({
            'key': 'constructs-view',
            'observer': new ObjectObserver({ 'contentType': new Construct({}), 'messages': new MessageRepository() })
        });

        var IndexView = new CRUDView({
            'observer': new ObjectObserver({ 'contentType': new Index({}), 'messages': new MessageRepository() }),
            'views': new ObjectObserver({ object: {} })
        });

        IndexView.getObserverObject().SelectConstructs = function (url, namespace) {

            try {
                var xhr = new XMLHttpRequest();
                xhr.open("GET", url);
                xhr.responseType = "json";
                xhr.onload = function () {
                    var jsonResponse = xhr.response;

                    if (namespace !== null && namespace !== undefined) {

                        var namespaceComponents = [];
                        for (var i = 0; i < jsonResponse["Components"].length; i++) {

                            if (jsonResponse["Components"][i]["Namespace"] === namespace) {
                                namespaceComponents.push(jsonResponse["Components"][i]);
                            }
                        }

                        jsonResponse["Components"] = namespaceComponents;
                    }
                    IndexView.getObserverObject().setFormObject(jsonResponse);
                };
                xhr.send();

            } catch (e) {

                console.log(e.message);
            }
        };

        IndexView.getObserverObject().SelectConstruct = function (url, id) {

            try {
                var xhr = new XMLHttpRequest();
                xhr.open("GET", url);
                xhr.responseType = "json";
                xhr.onload = function () {
                    var jsonResponse = xhr.response;

                    if (id !== null && id !== undefined) {


                        if (jsonResponse["Constructs"] !== null && jsonResponse["Constructs"] !== undefined) {

                            if (jsonResponse["Constructs"]["Components"] !== null && jsonResponse["Constructs"]["Components"] !== undefined) {

                                for (var i = 0; i < jsonResponse["Constructs"]["Components"].length; i++) {

                                    if (jsonResponse["Constructs"]["Components"][i]["Id"] === id) {

                                        ConstructView.getObserverObject().setFormObject(new Construct(jsonResponse["Constructs"]["Components"][i]));
                                        break;
                                    }
                                }
                            }
                        }
                    }
                    else {

                        ConstructView.getObserverObject().setFormObject(new Construct(jsonResponse));
                    }
                };
                xhr.send();

            } catch (e) {

                console.log(e.message);
            }
        };

        IndexView.setReferentialViews(ConstructView);

        $(function () {

            try {

                ko.validation.init({
                    insertMessages: false,
                    decorateElement: true,
                    errorElementClass: 'error'
                });

                ko.applyBindings(IndexView.getObserverObject());

                IndexView.getObserverObject().SelectConstructs("index.json");

            } catch (e) {

                console.log(e.message);
            }
        });

    </script>
</body>
</html>
