<!DOCTYPE html>
<html>
    <head th:fragment="header(title,links,scripts)">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title th:replace="${title}">Default Title</title>

        <link th:href="@{/resources/styles/bootstrap.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/resources/styles/bootstrap-theme.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/resources/styles/jquery-ui.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/resources/styles/jquery-ui.structure.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/resources/styles/jquery-ui.theme.min.css}" rel="stylesheet" type="text/css" />
        
        <link th:href="@{/resources/fonts/font-awesome.min.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/resources/styles/extensions/datepicker3.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/resources/styles/extensions/native-carousel.css}" rel="stylesheet" type="text/css" />
        <link th:href="@{/resources/styles/extensions/native-styles.css}" rel="stylesheet" type="text/css" />

        <link th:href="@{/resources/fonts/FontAwesome.otf}" />
        <link th:href="@{/resources/fonts/fontawesome-webfont.eot}" />
        <link th:href="@{/resources/fonts/fontawesome-webfont.svg}" />
        <link th:href="@{/resources/fonts/fontawesome-webfont.ttf}" />
        <link th:href="@{/resources/fonts/fontawesome-webfont.woff}" />
        <link th:href="@{/resources/fonts/fontawesome-webfont.woff2}" />
        <link th:href="@{/resources/fonts/glyphicons-halflings-regular.eot}" />
        <link th:href="@{/resources/fonts/glyphicons-halflings-regular.svg}" />
        <link th:href="@{/resources/fonts/glyphicons-halflings-regular.ttf}" />
        <link th:href="@{/resources/fonts/glyphicons-halflings-regular.woff}" />
        <link th:href="@{/resources/fonts/glyphicons-halflings-regular.woff2}" />

        <script th:src="@{/resources/scripts/respond.min.js}" type="text/javascript"></script>
        <script th:src="@{/resources/scripts/jquery-2.1.4.min.js}" type="text/javascript"></script>
        <script th:src="@{/resources/scripts/jquery.form.min.js}" type="text/javascript"></script>
        <script th:src="@{/resources/scripts/jquery-ui-1.12.1.min.js}" type="text/javascript"></script>
        <script th:src="@{/resources/scripts/knockout-3.3.0.js}" type="text/javascript"></script>
        <script th:src="@{/resources/scripts/knockout.validation.js}" type="text/javascript"></script>
        <script th:src="@{/resources/scripts/bootstrap.min.js}" type="text/javascript"></script>
        <script th:src="@{/resources/scripts/underscore.min.js}" type="text/javascript"></script>
        <script th:src="@{/resources/scripts/moment.min.js}" type="text/javascript"></script>
        <script th:src="@{/resources/scripts/bootstrap-datepicker.js}" type="text/javascript"></script>
        <script th:src="@{/resources/scripts/bootstrap-timepicker.js}" type="text/javascript"></script>

        <script th:src="@{/resources/windntrees/Util.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/CharacterEncoder.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/DateParser.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/FlexObject.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/InstanceExtender.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/CRUDController.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/CRUDProcessor.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/ArrayProcessor.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/LocaleMessage.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/Repository.js}" type="text/javascript"></script>
        
        <script th:src="@{/resources/windntrees/observers/ActivityObserver.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/observers/ObjectObserver.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/observers/DetailObserver.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/observers/ListObserver.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/observers/CRUDObserver.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/observers/SearchObserver.js}" type="text/javascript"></script>

        <script th:src="@{/resources/windntrees/observers/kn/ActivityKNObserver.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/observers/kn/ObjectKNObserver.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/observers/kn/DetailKNObserver.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/observers/kn/ListKNObserver.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/observers/kn/CRUDKNObserver.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/observers/kn/SearchKNObserver.js}" type="text/javascript"></script>

        <script th:src="@{/resources/windntrees/views/Common.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/ListNavigator.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/ObjectView.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/Alternator.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/CRUDSList.js}" type="text/javascript"></script>

        <script th:src="@{/resources/windntrees/views/object/NewView.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/object/EditView.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/object/SearchView.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/object/CRUDView.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/object/CRUDRelatedView.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/object/SearchList.js}" type="text/javascript"></script>

        <script th:src="@{/resources/windntrees/views/html/TextView.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/html/ImageView.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/html/AVView.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/html/FlexView.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/html/FlexHtml.js}" type="text/javascript"></script>
        <script th:src="@{/resources/windntrees/views/html/ContentList.js}" type="text/javascript"></script>
        
    <th:block th:replace="${links}" />

    <script type="text/javascript">
        function intialize(repository) {

        ko.validation.init({
        insertMessages: false,
                decorateElement: true,
                errorElementClass: 'error'
        });
        
        ko.validation.rules['required'].message = "[[#{validate.required.text}]]";
        ko.validation.rules['min'].message = "[[#{validate.min.text}]]";
        ko.validation.rules['max'].message = "[[#{validate.max.text}]]";
        ko.validation.rules['minLength'].message = "[[#{validate.minLength.text}]]";
        ko.validation.rules['maxLength'].message = "[[#{validate.maxLength.text}]]";
        ko.validation.rules['pattern'].message = "[[#{validate.pattern.text}]]";
        ko.validation.rules['step'].message = "[[#{validate.step.text}]]";
        ko.validation.rules['email'].message = "[[#{validate.email.text}]]";
        ko.validation.rules['date'].message = "[[#{validate.date.text}]]";
        ko.validation.rules['dateISO'].message = "[[#{validate.dateISO.text}]]";
        ko.validation.rules['number'].message = "[[#{validate.number.text}]]";
        ko.validation.rules['digit'].message = "[[#{validate.digit.text}]]";
        ko.validation.rules['phoneUS'].message = "[[#{validate.phoneUS.text}]]";
        ko.validation.rules['equal'].message = "[[#{validate.equal.text}]]";
        ko.validation.rules['notEqual'].message = "[[#{validate.notEqual.text}]]";
        ko.validation.registerExtenders();
        repository.add(new LocaleMessage("form.new.text", "[[#{form.new.text}]]"));
        repository.add(new LocaleMessage("form.edit.text", "[[#{form.edit.text}]]"));
        repository.add(new LocaleMessage("form.noRecord.text", "[[#{form.noRecord.text}]]"));
        repository.add(new LocaleMessage("form.found.text", "[[#{form.found.text}]]"));
        repository.add(new LocaleMessage("form.records.text", "[[#{form.records.text}]]"));
        repository.add(new LocaleMessage("form.displayingPage.text", "[[#{form.displayingPage.text}]]"));
        repository.add(new LocaleMessage("form.of.text", "[[#{form.of.text}]]"));
        repository.add(new LocaleMessage("form.totalPages.text", "[[#{form.totalPages.text}]]"));
        repository.add(new LocaleMessage("standard.alertSure.text", "[[#{standard.alertSure.text}]]"));
        repository.add(new LocaleMessage("standard.processing.text", "[[#{standard.processing.text}]]"));
        repository.add(new LocaleMessage("standard.err.text", "[[#{standard.err.text}]]"));
        repository.add(new LocaleMessage("standard.ok.text", "[[#{standard.ok.text}]]"));
        repository.add(new LocaleMessage("standard.listloadok.text", "[[#{standard.listloadok.text}]]"));
        repository.add(new LocaleMessage("standard.listloaderr.text", "[[#{standard.listloaderr.text}]]"));
        
        return repository;
        }
    </script>

    <th:block th:replace="${scripts}" />

    <script type="text/javascript">
        function loadMenus(edit, renderRoles)
        {
        var editMode = false;
        if (edit !== null) {
        editMode = (edit === "true" || edit === "yes") ? true : false;
        }

        var largeViewPort = window.matchMedia("(min-width: 768px)").matches;
        document.getElementById('menutext').innerHTML = '[[#{standard.processing.text}]]';
        $.ajax({
        type: "POST",
                url: "[[@{/navs/load}]]",
                data: JSON.stringify({"roles": renderRoles, "largeViewPort": largeViewPort, "editMode": editMode}),
                contentType: "application/json; charset=utf-8",
                success: function (data, textStatus, jqXHR) {
                document.getElementById('menutext').innerHTML = "";
                document.getElementById('menutext').style = "display:none";
                document.getElementById('navmenu').innerHTML = document.getElementById('navmenu').innerHTML + data;
                },
                error: function (jqXHR, textStatus, errorThrown) {
                document.getElementById('menutext').style = "";
                document.getElementById('menutext').innerHTML = '[[#{standard.err.text}]]';
                },
                complete: function (jqXHR, textStatus) {}
        });
        }
    </script>
</head>
<body>

    <section th:fragment="shared-views">
        <script type="text/html" id="results_processing">
            <span data-bind="visible: Processing()">
                <i class="fa fa-cog fa-spin fa-2x"></i>
            </span>
        </script>
        <script type="text/html" id="results_messages">
            <span data-bind="if: ResultMessage().length > 0" class="alert">
                <span data-bind="text: ResultMessage"></span>
            </span>
        </script>

        <script type="text/html" id="form_processing">
            <span data-bind="visible: $parents[0].FormProcessing()">
                <i class="fa fa-cog fa-spin fa-2x"></i>
            </span>
        </script>
        <script type="text/html" id="form_messages">
            <span data-bind="if: $parents[0].FormResultMessage().length > 0" class="alert">
                <span data-bind="text: $parents[0].FormResultMessage"></span>
            </span>
        </script>

        <script type="text/html" id="list_results_messages">
            <span data-bind="if: ResultMessage().length > 0">
                <span data-bind="text: ResultMessage"></span>
            </span>
        </script>
        <script type="text/html" id="list_error_messages">
            <li class="alert alert-danger"><span data-bind="text: errField"></span> <span data-bind="text: errMessage"></span></li>
        </script>
    </section>

    <section th:fragment="page-path"></section>

    <div class="container" th:fragment="heading1(title,welcome)">
        <h1 class="d-flex align-content-start" th:text="${title}"></h1>
        <p class="d-flex align-content-start" th:text="${welcome}"></p>
    </div>

    <div class="container" th:fragment="heading2(title,welcome)">
        <h2 class="d-flex align-content-start" th:text="${title}"></h2>
        <p class="d-flex align-content-start" th:text="${welcome}"></p>
    </div>

    <footer id="contentfooter" th:fragment="content-footer" th:object="${webappinfo}">
        <div class="container">
            <div class="form-row form-group">
                <div class="col-md-4 order-0">
                    <!-- COLUMN 1 -->
                    <h2 class="d-flex align-content-start" th:text="*{title}" ></h2>
                    <img th:src="@{/resources/images/logo.png}" class="logo" th:alt="*{title}">
                    <p class="d-flex align-content-start" th:text="*{description}"></p>
                    <address>
                        <ul class="d-flex align-items-start list-unstyled">
                            <li><span th:text="*{addressLine1}"></span></li>
                            <li><span th:text="*{addressLine2}"></span></li>
                            <li><span th:text="*{addressLine3}"></span></li>
                            <li><span th:text="#{form.email.text}"></span> <a href="mailto:[[*{email}]]"><span th:text="*{email}"></span></a></li>
                            <li><span th:text="#{form.phone.text}"></span> <span th:text="*{phone1}" ></span>, <span th:text="*{phone2}" ></span></li>
                            <li><span th:text="#{form.fax.text}"></span> <span th:text="*{fax}"></span>, <span th:text="#{form.mobile.text}"></span> <span th:text="*{mobile}"></span></li>
                        </ul>
                    </address>
                    <!-- END COLUMN 1 -->
                </div>
                <div class="col-md-4 order-1">
                    <!-- COLUMN 2  -->
                    <h3 class="d-flex align-content-start" th:title="#{form.usefullinks.text}" th:text="#{form.usefullinks.text}"></h3>
                    <div class="form-row form-group">
                        <div class="col-md-12">
                            <ul class="d-flex align-items-start list-unstyled">
                                <li><a href="#">link 1</a></li>
                                <li><a href="#">link 2</a></li>
                                <li><a href="#">link 3</a></li>
                                <li><a href="#">link 4</a></li>
                            </ul>
                            <ul class="d-flex align-items-start list-unstyled">
                                <li><a href="#" th:href="@{?locale=en}" th:title="#{nav.languageenglish.desc}" ><span th:text="#{nav.languageenglish.text}"></span></a></li>
                                <li><a href="#" th:href="@{?locale=ur}" th:title="#{nav.languageurdu.desc}" ><span th:text="#{nav.languageurdu.text}"></span></a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- END COLUMN 2 -->
                </div>
                <div class="col-md-4 order-2">
                    <!-- COLUMN 3 -->
                    <div class="social-connect">
                        <h3 class="d-flex align-content-start footer-heading" th:text="#{form.getconnected.text}"></h3>
                        <ul class="d-flex align-items-start list-inline social-icons">
                            <li><a href="#" class="facebook-bg"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="#" class="linkedin-bg"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="#" class="twitter-bg"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="#" class="googleplus-bg"><i class="fa fa-google-plus"></i></a></li>
                        </ul>
                    </div>
                    <!-- END COLUMN 3 -->
                </div>
            </div>
        </div>
        <!-- COPYRIGHT -->
        <div class="text-center copyright">
            <span th:text="*{copyright}"></span>
            <span th:text="#{form.allrights.text}">All rights reserved.</span> 
        </div>
        <!-- END COPYRIGHT -->
    </footer>
    
    <script type="text/javascript" th:fragment="nav-script">
        $(function () {
        var locale = '[[${#locale}]]' === '' ? 'en' : '[[${#locale}]]';
        if (locale.startsWith("ur"))
        {
            document.body.dir = "rtl";
        }
        
        loadMenus(null, null);
        });
    </script>
</body>
</html>